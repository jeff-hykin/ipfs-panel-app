<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
<script>
window.addEventListener("message", (event) => {
    // FIXME: require the code calling the Panel app to send proof of who they are
    // then look up / confirm who they are based on local storage preferences and default fallbacks
    //     import HKP from '@openpgp/hkp-client';
    //     import { readKey } from 'openpgp';
    //     (async () => {
    //         const hkp = new HKP(); // Defaults to https://keyserver.ubuntu.com, or pass another keyserver URL as a string
    //         const publicKeyArmored = await hkp.lookup({
    //             query: 'alice@example.com'
    //         });
    //         const publicKey = await readKey({
    //             armoredKey: publicKeyArmored
    //         });
    //     })();
    
    console.log(event)
    // add data to body
    document.body.innerHTML += `<span> [${event.origin}, ${event.timeStamp}] ${event.data}</span>`
    // respond to data (random number)
    event.source.postMessage(`{"response": ${Math.random()} }`, event.origin)
}, false)
</script>
</html>